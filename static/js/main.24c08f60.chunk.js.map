{"version":3,"sources":["pages/homepage.jsx","pages/settings.jsx","pages/visualisation.jsx","pages/about.jsx","components/burgerMenu.jsx","App.js","serviceWorker.js","index.js","regionalVolumesSample/readUCD.js","regionalVolumesSample/samplingWASM.js","regionalVolumesSample/doPartitionGeodesics.js","computationWindow.js","styledDropzone.js","dataStructures.js","interpolateSampling.js","interpolateSampling.wasm"],"names":["HomePage","_useState","useState","_useState2","Object","slicedToArray","react_default","a","createElement","title","src","process","alt","align","SettingsPage","MeshDisplayCanvas","props","height","window","innerHeight","state","setState","radius","React","useRef","useEffect","handleResize","addEventListener","removeEventListener","mesh","meshRef","wireframe","geometry","THREE","i","V","length","vertices","push","construct","toConsumableArray","Varray","E","faces","j","color","ii","dA","dP","dT","vertexColors","computeBoundingSphere","center","current","boundingSphere","material","geoWireframe","matWireframe","linewidth","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","computeFaceNormals","ref","RightVentricleMesh","web","style","width","textAlign","background","camera","position","far","react","fallback","TrackballControls","rotateSpeed","VisualisationPage","_useState3","_useState4","patientSelected","setPatientSelected","_useState5","_useState6","phaseSelected","setPhaseSelected","patientsOption","patientsComputed","map","p","index","value","label","index_esm","split","minSize","defaultSize","primary","react_select_browser_esm","options","onChange","v","console","log","className","classNamePrefix","undefined","toFixed","visualisation_MeshDisplayCanvas","AboutPage","class","burgerMenu","BurgerMenu","react_router_dom","to","App","_this","classCallCheck","this","_super","call","patientResults","mode","addNewResult","bind","assertThisInitialized","getComputedData","k","volsED","volsES","meshED","meshES","efComputed","ef","ed","es","basename","pageWrapId","outerContainerId","id","react_router","exact","path","homepage","computationWindow","about","visualisation","settings","Component","Boolean","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","__webpack_require__","d","__webpack_exports__","volume","readUCD","math_ds__WEBPACK_IMPORTED_MODULE_0__","parseUCD","text","Points","Cells","lines","firstLine","nPoints","parseInt","nCells","nLine","line","Vector3","parseFloat","coordinates","triangles","mean","addScaledVector","totalVol","m","Matrix3","t","set","x","y","z","determinant","blob","Promise","resolve","reject","fr","FileReader","onload","result","readAsText","readFile","arrayFloat32ToPtr","module","array","l","ptr","_malloc","HEAPF32","computeRegionalVolumeSamplingWASM","t1","Date","now","ptrs","Array","trianglesC","Int32Array","HEAP32","arrayInt32ToPtr","from","flat","pointsC","Float32Array","dAC","dPC","dTC","resC","t2","_doParcellationSamplint","_free","vol","cA","cP","cT","doPartitionGeodesics","copyPartition","geodesics","require","minimum","v1","v2","n","Math","min","mapToArray","arr","polygonSoup","pointsTricuspid","pointsPulmonary","dApex","dTricuspid","dPulmonary","res","partition","newPartition","interpolate","InterpolateSampling","locateFile","InterpolateSamplingWASM","ComputationWindow","_Users_gbernardino_RVparcellation_react_frontend_docker_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","patientsToCompute","MeshesList","numberToCompute","numberComputed","componentDidMount","_Users_gbernardino_RVparcellation_react_frontend_docker_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","addFiles","sendPatientFile","sendAllPatients","generateAndDownload","wasm","acceptedFiles","patients","forEach","addNewFile","_this2","get","keys","max","apply","_Users_gbernardino_RVparcellation_react_frontend_docker_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","aux","name","pop","moduleWASM","global","fullCycleFiles","all","results","iMinVol","newResult","ED","ES","tBeginGeodesics","partitionED","partitionES","tBeginSampling","removeFile","myHeaders","Headers","formData","FormData","append","fetch","method","headers","body","response","json","data","outflowEDV","inletEDV","apicalEDV","outflowEF","inletEF","apicalEF","_this3","csvContent","items","columnNames","join","item","rowInteger","Number","row","encodedUri","encodeURI","link","setAttribute","appendChild","click","percentage","react__WEBPACK_IMPORTED_MODULE_8___default","_styledDropzone__WEBPACK_IMPORTED_MODULE_10__","onDrop","react_bootstrap__WEBPACK_IMPORTED_MODULE_9__","variant","onClick","fontSize","disabled","react_router_dom__WEBPACK_IMPORTED_MODULE_16__","type","react_circular_progressbar__WEBPACK_IMPORTED_MODULE_11__","maxValue","minValue","concat","pId","key","Container","styled","div","_templateObject","isDragAccept","isDragReject","isDragActive","getColor","StyledDropzone","useCallback","_useDropzone","useDropzone","accept","getRootProps","getInputProps","react__WEBPACK_IMPORTED_MODULE_1___default","Dictionary","_Users_gbernardino_RVparcellation_react_frontend_docker_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__","callbackIfKeyNotFound","arguments","assign","Error","code","_Dictionary","_Users_gbernardino_RVparcellation_react_frontend_docker_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_1__","_Users_gbernardino_RVparcellation_react_frontend_docker_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_2__","file","nameSplit","slice","time","every","__filename","__dirname","$MODULE_NAME","_scriptDir","currentScript","readyPromiseResolve","readyPromiseReject","Module","moduleOverrides","hasOwnProperty","ENVIRONMENT_IS_NODE","ENVIRONMENT_IS_SHELL","arguments_","ENVIRONMENT_IS_WEB","ENVIRONMENT_IS_WORKER","importScripts","versions","node","read_","readAsync","readBinary","nodeFS","nodePath","scriptDirectory","dirname","filename","binary","ret","buffer","Uint8Array","assert","replace","ex","status","message","abort","read","f","readbuffer","scriptArgs","quit","print","warn","error","printErr","self","href","indexOf","substr","lastIndexOf","url","xhr","XMLHttpRequest","open","send","responseText","responseType","onerror","wasmBinary","wasmMemory","err","WebAssembly","ABORT","condition","getCFunc","ident","func","ccall","returnType","argTypes","args","opts","toC","string","str","len","outPtr","maxBytesToWrite","heap","outIdx","startIdx","endIdx","u","charCodeAt","u1","stringToUTF8Array","HEAPU8","stringToUTF8","stackAlloc","HEAP8","writeArrayToMemory","cArgs","stack","converter","stackSave","UTF8ToString","convertReturnValue","stackRestore","UTF8Decoder","TextDecoder","maxBytesToRead","idx","endPtr","subarray","decode","u0","u2","String","fromCharCode","ch","UTF8ArrayToString","wasmTable","__ATPRERUN__","__ATINIT__","__ATMAIN__","__ATPOSTRUN__","___wasm_call_ctors","runDependencies","runDependencyWatcher","dependenciesFulfilled","what","e","RuntimeError","hasPrefix","prefix","prototype","startsWith","dataURIPrefix","isDataURI","fileURIPrefix","isFileURI","wasmBinaryFile","getBinary","callRuntimeCallbacks","callbacks","callback","shift","arg","ExceptionInfoAttrs","DESTRUCTOR_OFFSET","REFCOUNT_OFFSET","TYPE_OFFSET","CAUGHT_OFFSET","RETHROWN_OFFSET","SIZE","ExceptionInfo","excPtr","set_type","get_type","set_destructor","destructor","get_destructor","set_refcount","refcount","set_caught","caught","get_caught","set_rethrown","rethrown","get_rethrown","init","add_ref","release_ref","prev","_emscripten_get_now","dateNow","performance","_emscripten_get_now_is_monotonic","calledRun","asmLibraryArg","c","size","b","uncaughtExceptionCount","clk_id","tp","___errno_location","requestedSize","info","receiveInstance","instance","buf","exports","Int8Array","Int16Array","Uint16Array","Uint32Array","Float64Array","clearInterval","removeRunDependency","receiveInstantiatedSource","output","instantiateArrayBuffer","receiver","credentials","catch","getBinaryPromise","instantiate","reason","instantiateStreaming","createWasm","run","doRun","cb","unshift","postRun","preRun","setTimeout","numericArgs","runCaller"],"mappings":"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","file":"static/js/main.24c08f60.chunk.js","sourcesContent":["import React, { useState } from 'react'\n// import the Javascript plumbing file\n\n\nfunction arrayInt32ToPtr(module, array) {\n  let nByte = 4;\n  var ptr = module._malloc(array.length * nByte)\n  module.HEAP32.set(array, ptr / nByte)\n  return ptr\n}\n\nfunction arrayFloat32ToPtr(module, array) {\n  let nByte = 4\n  var ptr = module._malloc(array.length * nByte)\n  module.HEAPF32.set(array, ptr / nByte)\n  return ptr\n}\n\n\nconst HomePage = () => {\n\tconst [ adderModule, setAdderModule] = useState()\n\n    // Load and instantiate the WebAssembly\n\n    return (\n      <div>\n        <h2>Page under construction --- our ingeneous engineers are working on it</h2>\n        <img  title=\"Our oompa loompa is processing. Please wait.\" src={process.env.PUBLIC_URL + './processing.gif'} alt=\"loading...\"  align=\"middle\" />\n        </div>\n    )\n  }\n  \n  export default HomePage;","import React from 'react';\n\n\nfunction SettingsPage() {\n    return (\n        <div>\n            <h2>Page under construction --- our ingeneous engineers are working on it</h2>\n            <img title=\"Our oompa loompa is processing. Please wait.\" src={process.env.PUBLIC_URL + './processing.gif'} alt=\"loading...\" align=\"middle\" />\n            </div>\n    );\n}\n\nexport default SettingsPage;","// see for inspiration https://codesandbox.io/s/r3f-contact-shadow-h5xcw?file=/src/index.js\n// three js fiber (react version of three js)\nimport React, { Suspense , useState, useRef, useEffect } from 'react'\nimport { Canvas} from 'react-three-fiber'\nimport { TrackballControls} from 'drei'\nimport * as THREE from \"three\";\nimport Select from 'react-select'\nimport SplitPane, { Pane } from 'react-split-pane';\n\nconst  RightVentricleMesh = (props) => {\n  //console.log(props.rv)\n  \n  //const vertices = useMemo(() => props.rv[7].V.map(v => new THREE.Vector3(v.x, v.y, v.z)), [])\n  //const faces = useMemo(() => props.rv[7].E.map(f => new THREE.Face3(...f)), [])\n  const meshRef = useRef()\n  const wireframe = useRef()\n\n  var mesh = props.mesh;\n  var radius = props.radius;\n\n  const geometry = new THREE.Geometry();\n  for (let i = 0; i < mesh.V.length; i++) {\n    geometry.vertices.push(new THREE.Vector3(...mesh.Varray[i]))\n  }\n  for (let i = 0; i < mesh.E.length; i++) {\n    geometry.faces.push(new THREE.Face3(...mesh.E[i]))\n\n    // Add coloring according to closest point\n    for (let j = 0; j < 3; j++){\n      var color;\n      var ii = mesh.E[i][j]\n      if (mesh.dA[ii] < mesh.dP[ii] && mesh.dA[ii] < mesh.dT[ii]) {\n        color = new THREE.Color(0xf8521)\n      }\n      else if ( mesh.dT[ii] < mesh.dP[ii]) {\n        color = new THREE.Color(0x0f4285)\n      }\n      else{\n        color = new THREE.Color(0x85180f)\n      }\n  \n      geometry.faces[i].vertexColors[j] = color;\n  \n    }\n  }\n\n  geometry.computeBoundingSphere();  \n  geometry.center();\n    \n  radius.current = geometry.boundingSphere.radius;\n  let material = new THREE.MeshStandardMaterial({vertexColors:THREE.VertexColors}) \n\n// wireframe\n  var geoWireframe = new THREE.WireframeGeometry( geometry ); // or WireframeGeometry\n  var matWireframe = new THREE.LineBasicMaterial( { color: 0x0, linewidth: 5, polygonOffset : true, polygonOffsetFactor: 2, polygonOffsetUnits: 1} );\n\n  geometry.computeFaceNormals();\n\n  return (\n    <group>\n       <mesh ref={meshRef} geometry={geometry} material={material}/ >\n       <lineSegments ref={wireframe} geometry={geoWireframe} material={matWireframe}/ >\n\n    </group>\n  )\n}\n\nconst MeshDisplayCanvas = (props ) => {\n  //Add a selector of which mesh\n  const [state, setState] = useState({height: window.innerHeight *0.8})\n  let radius = React.useRef([])\n\n  useEffect(() => {\n    // Handler to call on window resize\n    function handleResize() {\n      // Set window width/height to state\n      setState({height: window.innerHeight *0.8})\n    }\n\n    // Add event listener\n    window.addEventListener(\"resize\", handleResize);\n\n    // Call handler right away so state gets updated with initial window size\n    handleResize();\n\n    // Remove event listener on cleanup\n    return () => window.removeEventListener(\"resize\", handleResize);\n\n  }, []); // Empty array ensures that effect is only run on mount\n\n\n\n  let mesh = RightVentricleMesh( {mesh: props.mesh,radius:radius});\n  return (\n    <Canvas   style={{height: state.height, width:'95%', textAlign:'center', background: '#D3D3D3'}} camera={{ position: [0, 0, -3 * radius.current], far: 5 * radius.current}}>\n      <ambientLight />\n      <Suspense fallback={null}>\n      {mesh}\n      </Suspense >\n      <TrackballControls  rotateSpeed={4} />\n    </Canvas>\n  )\n  \n  }\n\n\n\nconst VisualisationPage = (props ) => {\n    const [patientSelected, setPatientSelected] = useState();\n    const [phaseSelected, setPhaseSelected] = useState();\n\n    const patientsOption = props.patientsComputed.map(\n      (p, index) => { \n        return { value: index, label: p[0] };\n      }\n    )\n    const phaseOptions = [{value: 'ED', label: 'End-diastole'}, {value: 'ES', label: 'End-systole'}];\n\n    return (\n      <div align=\"middle\">\n      <SplitPane split=\"vertical\" minSize={100} defaultSize={200} primary=\"first\">\n      <div>\n        <h3> Select patient</h3>\n        <Select\n              options={patientsOption}\n              onChange={(v) => {\n                setPatientSelected(v.value)\n                console.log(patientSelected, v)\n              } \n            }\n        />\n        <h3> Select phase</h3>\n\n \n        <Select\n                  className=\"basic-single\"\n                  classNamePrefix=\"select\"\n              options={phaseOptions}\n              onChange={(v) => {setPhaseSelected(v.value)\n              console.log(phaseSelected, v)\n             } }\n        />\n      <h2> Measurements </h2>\n      {\n        (patientSelected  !== undefined)\n        ? <table>\n        <tbody>\n        <tr><td>RVOT EDV </td>  {(props.patientsComputed[patientSelected][1] /1e3).toFixed(1) }</tr>\n        <tr><td>Inlet EDV</td>  {(props.patientsComputed[patientSelected][2] /1e3).toFixed(1)}</tr>\n        <tr><td>Apical EDV</td> {(props.patientsComputed[patientSelected][3] /1e3).toFixed(1)}</tr>\n        <tr><td>RVOT EF </td>   {(props.patientsComputed[patientSelected][4] ).toFixed(1)}</tr>\n        <tr><td>Inlet EF</td>   {(props.patientsComputed[patientSelected][5] ).toFixed(1)}</tr>\n        <tr><td>Apical EF</td>  {(props.patientsComputed[patientSelected][6] ).toFixed(1)}</tr>\n\n        </tbody>\n        </table>\n        : <div> Select a patient for displaying here the measurements</div>\n\n      }\n\n      </div>\n\n\n      { (patientSelected  !== undefined  && phaseSelected !== undefined)\n        ? <MeshDisplayCanvas mesh = {props.patientsComputed[patientSelected][phaseSelected === 'ED' ? 7 : 8 ]}  />\n        : <div> No patient selected to display. </div>\n      }\n      </SplitPane>   \n      </div>\n    )\n  }\n  \n  export default VisualisationPage;","import React from 'react';\n\n\nconst AboutPage = () => {\n    return (\n      <div>\n        <h2>Page under construction --- our ingeneous engineers are working on it</h2>\n        <img  title=\"Our oompa loompa is processing. Please wait.\" src={process.env.PUBLIC_URL + './processing.gif'} alt=\"loading...\" class=\"center\"/>\n        </div>\n    )\n  }\n  \n  export default AboutPage;","import React from \"react\";\nimport { slide as Menu } from \"react-burger-menu\";\nimport {  Link } from \"react-router-dom\";\nexport default props => {\n  return (\n    // Pass on our props\n    <Menu {...props}>\n        <Link to=\"/\">Home</Link>\n        <Link to=\"/computation\">Computation</Link>\n        <Link to=\"/visualisation\">Visualisation</Link>\n        <Link to=\"/settings\">Settings</Link>\n        <Link to=\"/about\">About</Link>\n\n\n    </Menu>\n  );\n};\n","import React from 'react';\nimport ComputationWindow from './computationWindow.js';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\nimport HomePage from './pages/homepage'\nimport SettingsPage from './pages/settings'\nimport VisualisationPage from './pages/visualisation'\nimport AboutPage from './pages/about.jsx'\nimport './styles/index.css';\nimport SideBar from \"./components/burgerMenu\";\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {patientResults: [],  mode : 'local'};\n\n    this.addNewResult = this.addNewResult.bind(this);\n    this.getComputedData = this.getComputedData.bind(this);   \n  }\n\n  addNewResult(k, volsED, volsES, meshED, meshES, efComputed){\n    var ef;\n    if (efComputed){\n      ef = (ed, es) => es;\n\n    }\n    else{\n       ef = (ed, es) => 100 * (ed - es)/ed;\n    }\n    let patientResults = this.state.patientResults\n    patientResults.push([k, volsED[0], volsED[1], volsED[2], ef(volsED[0], volsES[0]), ef(volsED[1], volsES[1]), ef(volsED[2], volsES[2]), meshED, meshES])\n    this.setState({patientResults : patientResults})\n  }\n\n  getComputedData(){\n    return this.state.patientResults;\n  }\n\n  render () {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          Right ventricle parcellation\n        </header>\n        <body>\n        <Router  basename=\"/\">\n        <SideBar pageWrapId={\"page-wrap\"} outerContainerId={\"App\"} />\n\n        <div id=\"page-wrap\">\n            <Switch>\n              <Route exact path={[\"/\", \"/home\"]}> \n                <HomePage />\n              </Route>\n              <Route path=\"/computation\">\n                    <ComputationWindow addNewResult = {this.addNewResult} patientsComputed = {this.state.patientResults} />\n              </Route>\n              <Route path=\"/about\">\n                <AboutPage />\n              </Route>\n              <Route path=\"/visualisation\">\n                <VisualisationPage  patientsComputed = {this.state.patientResults} />\n              </Route>\n              <Route path=\"/settings\">\n                <SettingsPage />\n              </Route>\n            </Switch>\n        </div>\n        </Router>\n       \n        </body>\n      </div>\n    );\n  }\n\n}\n\nexport default App;\n\n/*<CircularProgressbar\npercentage={percentage}\ntext={`${percentage.toFixed(2)}%`}\n/>\n*/","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport './styles/index.css';\n\n//import './styles/index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import {Vector3, Matrix3} from 'math-ds'\n\n\nfunction parseUCD(text) {\n    var Points = [];\n    var Cells = [];\n\n    var lines = text.split(/[\\r\\n]+/g); // tolerate both Windows and Unix linebreaks\n    let firstLine = lines[0].split(/ +/)\n    let nPoints = parseInt(firstLine[0]);\n    let nCells = parseInt(firstLine[1])\n    var nLine = 1;\n    for (let i = 0; i < nPoints; i ++) {\n        let line = lines[nLine].split(' ')\n        Points.push(new Vector3(parseFloat(line[1]), parseFloat(line[2]), parseFloat(line[3])));\n        nLine++;\n    }\n    for (let i = 0; i < nCells; i ++) {\n        let line = lines[nLine].split(/ +/)\n        if (line[2] !== 'tri') {\n            console.log(lines[nLine], nLine, firstLine)\n            throw('UCD has non-triangle face')\n        }\n        Cells.push([ parseInt(line[3]), parseInt(line[4]), parseInt(line[5])])\n\n        nLine++\n    }\n    return [Points, Cells]\n}\n\nexport function volume(coordinates, triangles) {\n  // COMPUTE mean\n  let mean = new Vector3(0,0,0);\n  for (let i = 0; i < coordinates.length; i++) {\n      mean.addScaledVector(coordinates[i], 1 /coordinates.length)\n  }\n\n  let totalVol = 0;\n  for (let i = 0; i < triangles.length; i++) {\n      let m = new Matrix3();\n      let t = triangles[i]\n      m.set(\n          coordinates[t[0]].x - mean.x, coordinates[t[0]].y - mean.y, coordinates[t[0]].z - mean.z, \n          coordinates[t[1]].x - mean.x, coordinates[t[1]].y - mean.y, coordinates[t[1]].z - mean.z, \n          coordinates[t[2]].x - mean.x, coordinates[t[2]].y - mean.y, coordinates[t[2]].z - mean.z)\n      let vol = m.determinant()/6;\n      totalVol += vol;\n  }\n  return totalVol;\n}\n\nexport function readUCD(blob) {\n    function readFile(blob){\n        return new Promise((resolve, reject) => {\n          var fr = new FileReader();  \n          fr.onload = () => {\n            resolve(fr.result )\n          };\n          fr.readAsText(blob);\n        });\n      }\n      return readFile(blob).then(parseUCD)\n}\n\n","function arrayInt32ToPtr(module, array, l) {\n    let nByte = 4;\n    var ptr = module._malloc(array.length * nByte)\n    module.HEAP32.set(array, ptr / nByte)\n    l.push(ptr);\n    return ptr\n  }\n  \nfunction arrayFloat32ToPtr(module, array, l) {\n    let nByte = 4\n    var ptr = module._malloc(array.length * nByte)\n    module.HEAPF32.set(array, ptr / nByte)\n    l.push(ptr);\n\n    return ptr\n}\n\nexport function computeRegionalVolumeSamplingWASM(module, mesh) {\n\n    let nSamples = 10000;\n    var t1 = Date.now()\n\n    // Convert everything to C\n    // If slow, could be optimised since 1) we can reuse the allocated space and 2) there is no need of so many onversion\n    var ptrs = Array();\n\n    var triangles =  new Int32Array;\n    triangles = Int32Array.from(mesh.E.flat());\n    var trianglesC = arrayInt32ToPtr(module, triangles, ptrs);\n\n    var points = new Float32Array;\n    points = Float32Array.from(mesh.Varray.flat());\n    var pointsC = arrayFloat32ToPtr(module, points, ptrs);\n\n    var dA = new Float32Array\n    dA = Float32Array.from(mesh.dA.flat());\n    var dAC = arrayFloat32ToPtr(module, dA, ptrs);\n\n    var dP = new Float32Array;\n    dP = Float32Array.from(mesh.dP.flat());\n    var dPC = arrayFloat32ToPtr(module, dP, ptrs);\n\n    var dT = new Float32Array;\n    dT = Float32Array.from(mesh.dT.flat());\n    var dTC = arrayFloat32ToPtr(module, dT, ptrs);\n\n    var res = new Float32Array(4);\n    var resC = arrayFloat32ToPtr(module, res, ptrs); // Reserve the space for output\n    var t2 = Date.now()\n    console.log('Time on copying data', t2 -t1)\n    module._doParcellationSamplint(pointsC, dAC,dPC, dTC, mesh.V.length, \n        trianglesC, mesh.E.length,  nSamples, resC);\n\n    for (let i = 0; i < ptrs.length; i += 1) { \n        module._free(ptrs[i]);\n    }\n\n    var vol = module.HEAPF32[resC/4];\n    var cA = module.HEAPF32[resC/4 + 1];\n    var cP = module.HEAPF32[resC/4 + 2];\n    var cT = module.HEAPF32[resC/4 + 3];\n    console.log(vol, cA, cP, cT)\n    return[ vol * cP, vol * cT, vol * cA];\n}","import { Vector3 } from 'math-ds';\nimport MeshSampler from './sample'\nimport { PointOctree } from \"sparse-octree\";\nlet debug = false;\nlet geodesics = require('mesh-geodesic');\nlet RBF = require(\"rbf\");\n\nfunction minimum(v1, v2, n){\n    let v =[];\n    for(let i = 0; i < n; i++){\n        v.push(Math.min(v1[i], v2[i]))\n    }\n    return v;\n}\nfunction mapToArray(v, n){\n    let arr = [];\n    for (let i = 0; i < n; i++){\n        arr.push(v[i])\n    }\n    return arr\n}\n\nexport function doPartitionGeodesics(polygonSoup){\n    let E = polygonSoup[1];\n    let V = polygonSoup[0];\n    let Varray = [];\n    for (let i = 0; i < V.length; i++) {\n        Varray.push([V[i].x, V[i].y, V[i].z])\n    }\n    \n    let apexId = 906;\n    let pointsTricuspid = [388, 389, 392, 393, 144, 540, 145, 538, 539, 422, 423, 38, 541, 49, 55, 328, 329, 332, 333, 87, 94, 100, 101, 103, 104, 105, 122, 123, 126, 127];\n    let pointsPulmonary = [410, 411, 409, 408, 53, 64, 65, 66, 67, 68, 69, 83, 476, 477, 92, 478, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 479];\n    let dApex = geodesics(E, Varray,  apexId);\n    let dTricuspid = geodesics(E, Varray,  pointsTricuspid[0]);\n    for (let i = 1; i < pointsTricuspid.length; i++) {\n        dTricuspid = minimum(dTricuspid, geodesics(E, Varray,  pointsTricuspid[i]), V.length)\n    }\n\n    let dPulmonary = geodesics(E, Varray,  pointsPulmonary[0]);\n    for (let i = 1; i < pointsPulmonary.length; i++) {\n        dPulmonary = minimum(dPulmonary, geodesics(E, Varray,  pointsPulmonary[i]), V.length)\n    }\n    let res =  {};\n    res.E = E;\n    res.V = V;\n    res.Varray = Varray;\n    res.dA = mapToArray(dApex, V.length);\n    res.dP = mapToArray(dPulmonary, V.length);\n    res.dT = mapToArray(dTricuspid, V.length);\n    return res;\n}\nexport function copyPartition(polygonSoup, partition){\n    let newPartition = {};\n    newPartition.E = polygonSoup[1];\n    newPartition.V = polygonSoup[0];\n    let Varray = [];\n    for (let i = 0; i < newPartition.V.length; i++) {\n        Varray.push([newPartition.V[i].x, newPartition.V[i].y, newPartition.V[i].z])\n    }\n    newPartition.Varray = Varray;\n    newPartition.dA = partition.dA;\n    newPartition.dP = partition.dP;\n    newPartition.dT = partition.dT;\n    return newPartition;\n}\n\nfunction boundingBox(points) {\n    var min = new Vector3(1000,10000,1000);\n    var max = new Vector3(-1000,-10000,-1000);\n    for (let i = 0; i < points.length; i++) {\n        if (min.x > points[i].x){\n            min.x = points[i].x\n        }\n        if (max.x < points[i].x){\n            max.x = points[i].x\n        }\n\n        if (min.y > points[i].y){\n            min.y = points[i].y\n        }\n        if (max.y < points[i].y){\n            max.y = points[i].y\n        }\n\n        if (min.z > points[i].z){\n            min.z = points[i].z\n        }\n        if (max.z < points[i].z){\n            max.z = points[i].z\n        }\n    }\n    return [min, max]\n}\n\nlet interpolationMethod = 'rbf';\nlet transpose = m => m[0].map((x,i) => m.map(x => x[i])) // https://stackoverflow.com/questions/17428587/transposing-a-2d-array-in-javascript\n\nexport function computeRegionalVolumeSampling(mesh){\n    var t0 = Date.now();\n\n    let sampler = new MeshSampler(mesh.V, mesh.E)\n    var nsamples;\n    if (mesh.nsamples === undefined) {\n        nsamples = 1000\n    }\n    else {\n        nsamples = mesh.nsamples\n    }\n    let cA = 0;\n    let cP = 0;\n    let cT = 0;\n    let m = boundingBox(mesh.V);\n    var octtree = new PointOctree(m[0], m[1]);\n    if (interpolationMethod === 'nearest') {\n        for (let i = 0; i < mesh.V.length; i++) {\n            octtree.insert(mesh.V[i], i);\n        }\n    }\n    var t1 = Date.now()\n    console.log(t1 - t0)\n    //var rbfA, rbfT, rbfP;\n    var rbfAllSegments;\n    if (interpolationMethod === 'rbf') {\n        rbfAllSegments = RBF(mesh.Varray, transpose([mesh.dA, mesh.dP, mesh.dT]), 'linear');\n    }\n    var t2 = Date.now()\n    console.log('Time construct RBF', t2 - t1)\n\n    for (let i = 0; i < nsamples; i ++)\n    {\n        let p = sampler.getSample();\n\n        // Get the counts  --- we can actually precompute the partition...\n        var daa, dpp, dtt;\n        if (interpolationMethod === 'nearest') {\n            let res = octtree.findNearestPoint(p.point);\n            let iPoint = res.data;\n            daa = mesh.dA[iPoint];\n            dpp = mesh.dP[iPoint];\n            dtt = mesh.dT[iPoint];\n        }\n        else {\n\n            let d = rbfAllSegments([p.point.x, p.point.y, p.point.z])\n            daa = d[0];\n            dpp = d[1];\n            dtt = d[2];\n    \n            if (debug && i % 100 === 0){\n                console.log(daa, dpp, dtt)\n            }\n        }\n\n        if (daa < dtt && daa < dpp){\n            cA += p.sign\n        }\n        else if (dtt < dpp){ \n            cT += p.sign;\n        } \n        else {\n            cP += p.sign;\n        }\n    }\n    var t3 = Date.now()\n    console.log('Time sampling', t3 - t2)\n    console.log('Time total', t3 - t0)\n\n    let totalVol = sampler.totalVol;\n    let pA = cA/(cA + cP + cT) * totalVol;\n    let pP = cP/(cA + cP + cT) * totalVol;\n    let pT = cT/(cA + cP + cT) * totalVol;\n    return[pP, pT, pA];\n}\n\n","import React from 'react';\nimport  { Button} from 'react-bootstrap';\nimport StyledDropzone from './styledDropzone';\nimport {CircularProgressbar } from 'react-circular-progressbar';\nimport {volume, readUCD} from './regionalVolumesSample/readUCD';\nimport {doPartitionGeodesics, computeRegionalVolumeSampling, copyPartition} from './regionalVolumesSample/doPartitionGeodesics';\nimport {MeshesList} from './dataStructures';\nimport \"./styles/index.css\"\nimport {Link} from 'react-router-dom'\n  \nimport {computeRegionalVolumeSamplingWASM} from './regionalVolumesSample/samplingWASM'\nimport InterpolateSampling from './interpolateSampling.js';\nimport InterpolateSamplingWASM from './interpolateSampling.wasm';\n\nconst interpolate = InterpolateSampling({\n  locateFile: () => {\n      return InterpolateSamplingWASM;\n  },\n});\nclass ComputationWindow extends React.Component {\n    constructor(props) {\n      super(props);\n    \n      this.state = {patientsToCompute : new MeshesList(), numberToCompute : 1, numberComputed: 1,  mode : 'local'};\n\n      this.componentDidMount = this.componentDidMount.bind(this);      \n      this.addFiles = this.addFiles.bind(this);\n      this.sendPatientFile = this.sendPatientFile.bind(this);   \n      this.sendAllPatients = this.sendAllPatients.bind(this);   \n      this.generateAndDownload = this.generateAndDownload.bind(this);      \n    }\n\n    async componentDidMount() {\n      this.setState({module: undefined});\n      console.log('Start 3')\n      const wasm = await interpolate;\n      console.log(wasm);\n      this.setState({module: wasm});\n    }\n\n    addFiles(acceptedFiles) {\n      /*\n      Add files to patients.\n      TODO: Do not add if it is already computed \n      */\n      let patients = this.state.patientsToCompute;\n      console.log(acceptedFiles);\n      acceptedFiles.forEach(blob => patients.addNewFile(blob));\n      this.setState({ patients: patients});\n    }\n\n    sendPatientFile(k){\n      /*\n      WARNING: not sure how this handles concurent accesses... better work one by one.\n      */\n     var t1 = Date.now()\n      if (this.state.patientsToCompute.get(k).keys().length !== (1 + Math.max(...this.state.patientsToCompute.get(k).keys()))) {\n        this.setState({numberComputed: this.state.numberComputed + 1})\n        return\n      }\n      var aux =  this.state.patientsToCompute.get(k).get(0).name.split('.').pop();\n      var moduleWASM = this.state.module\n      if (this.state.mode === 'docker' ) {\n        console.log('Sending new patient')\n        var myHeaders = new Headers();\n        var formData = new FormData();\n        formData.append('pId', k)\n        formData.append('format', aux)\n        this.state.patientsToCompute.get(k).keys().forEach(t =>  formData.append(t, this.state.patientsToCompute.get(k).get(t) ));\n        var myData = { method: 'POST',\n                      headers: myHeaders,\n                      mode: 'cors',\n                      body: formData\n                      };\n  \n        fetch('http://localhost:5000/computePartitionSingleIndividual', myData)\n        .then(function(response) {\n          response.json().then(function(data) {\n            let patientsToCompute = global.state.patientsToCompute\n            patientsToCompute.removeFile(k)\n            global.setState({patientsToCompute : patientsToCompute, numberComputed: global.state.numberComputed + 1})\n            global.props.addNewResult(k, [data.outflowEDV, data.inletEDV, data.apicalEDV], [data.outflowEF, data.inletEF, data.apicalEF], undefined, undefined, true)\n            });\n    \n        });\n      }\n      else { \n          let global = this;\n          var fullCycleFiles = [];\n          this.state.patientsToCompute.get(k).keys().forEach(t =>  fullCycleFiles.push(this.state.patientsToCompute.get(k).get(t) )); // This can prob be simplified...\n          Promise.all(fullCycleFiles.map(readUCD)).then(\n            function(results){\n              var t2 = Date.now()\n              console.log('Time parsing files', t2 - t1)\n              var iMinVol = -1;\n              var totalVol = 1e20;\n              for (let i = 1; i < results.length; i++ ) {\n                let v = volume(results[i][0], results[i][1]);\n                if (totalVol > v) {\n                    iMinVol = i;\n                    totalVol = v;\n                }\n              }\n              console.log('iMin', iMinVol)\n              let newResult = {};\n              newResult.ED = results[0];\n              newResult.ES = results[iMinVol];\n              console.log( 'Selecting ES =', Date.now() - t2)\n\n              return newResult;\n              \n            }).then(\n              function(results){\n                var tBeginGeodesics = Date.now();\n\n                let partitionED = doPartitionGeodesics(results.ED);\n                let partitionES = copyPartition(results.ES, partitionED);\n                var volsED, volsES;\n                var tBeginSampling = Date.now();\n                console.log( 'Time geodesics =', tBeginSampling - tBeginGeodesics)\n\n                if (false) {\n                  volsED = computeRegionalVolumeSampling(partitionED);\n                  volsES = computeRegionalVolumeSampling(partitionES);\n                }\n                else{\n                  volsED = computeRegionalVolumeSamplingWASM(moduleWASM, partitionED);\n                  volsES = computeRegionalVolumeSamplingWASM(moduleWASM, partitionES);\n                }\n                console.log( 'Sampling volume =', Date.now() - tBeginSampling)\n\n                // TODO: Same code as in the server approach for computing: Do a function\n                global.props.addNewResult(k, volsED, volsES, partitionED, partitionES, false)\n                let patientsToCompute = global.state.patientsToCompute\n                patientsToCompute.removeFile(k)\n                global.setState({patientsToCompute : patientsToCompute, numberComputed: global.state.numberComputed + 1})\n                console.log( 'Total patient processing time =', Date.now() - t1)\n              }\n            )        \n          return\n  \n      }\n    }\n    \n    sendAllPatients(){\n      //TODO: Check that it is correct\n        this.setState({numberToCompute: this.state.patientsToCompute.length(), numberComputed : 0})\n        this.state.patientsToCompute.keys().forEach(k => this.sendPatientFile(k))\n    }\n  \n  \n    generateAndDownload(){\n      /*\n      Generates a csv file with all the processed measurements, and downloads it\n      */\n      var csvContent =\"data:text/csv;charset=utf-8,\";\n      let items = ['pID', 'outflowEDV', 'inletEDV', 'apicalEDV', 'outflowEF', 'inletEF', 'apicalEF'];\n      var columnNames = items.join(\";\");\n      csvContent += columnNames + \"\\r\\n\";\n      this.props.patientsComputed.forEach(function (item, index) {\n        var rowInteger = new Array(items.length)\n        for (var i = 1; i < items.length; i++) {\n          rowInteger[i] = Number(item[i]).toFixed(3)\n        }\n        let row = rowInteger.join(\";\");\n        csvContent += row + \"\\r\\n\";\n      });\n  \n  \n      var encodedUri = encodeURI(csvContent);\n      var link = document.createElement(\"a\");\n      link.setAttribute(\"href\", encodedUri);\n      link.setAttribute(\"download\", \"regionalVolumes.csv\");\n      document.body.appendChild(link); // Required for FF\n  \n      link.click(); \n    }\n\n    render () {\n      let patients = this.state.patientsToCompute;\n      var patientsComputed = this.props.patientsComputed;\n      let percentage = 100 * this.state.numberComputed / this.state.numberToCompute;\n      return (\n        <div className=\"Computation\">\n            <aside>\n            {this.state.numberComputed === this.state.numberToCompute ?\n              ( <div> \n                <StyledDropzone onDrop={this.addFiles } />\n                <Button variant=\"dark\" onClick={this.sendAllPatients} style = {{fontSize: 18}}> \n                Parcellate!  </Button>\n                <Button variant=\"dark\" disabled= {this.state.numberComputed !== this.state.numberToCompute && this.state.module !== undefined} \n                                  onClick={this.generateAndDownload} style = {{fontSize: 18}}>\n                   Download CSV</Button>\n                <Link to=\"/visualisation\">\n                    <button type=\"button\" style = {{fontSize: 18}}>\n                          Visualisation\n                    </button>\n                </Link>\n                </div>\n              )\n              :\n              (\n                <div class = 'container'> \n                   <CircularProgressbar\n                    value={percentage}\n                    maxValue={100}\n                    minValue={0}\n                    text={`${this.state.numberComputed}/${this.state.numberToCompute}`}\n                    />\n                </div>\n              )\n            }\n            <div class=\"row\">\n              <div class=\"column\">\n  \n                        <h4>Patients to compute </h4>\n                        <ul>{patients.keys().map(pId => (<li key={pId}>\n                          <font color={  patients.get(pId).keys().length === (1 + Math.max(...patients.get(pId).keys())) ? \"black\" : \"red\"}>\n                            {pId}  -  { patients.get(pId).keys().length} / {1 + Math.max(...patients.get(pId).keys())}\n                          </font> \n                          </li> ) \n                          )}\n                        </ul>\n                  </div>\n              <div class=\"column\">\n              <h4>Patients computed </h4>\n              <ul>{patientsComputed.map(pId => (<li key={pId[0]}>\n                          <font color=\"Black\">\n                            {pId[0]}  \n                          </font> \n                          </li> ) \n                          )}\n                        </ul>\n                </div>\n          </div> \n            {/* <Button variant=\"primary\"  onClick={this.testPost}> Add dummy result </Button> */}\n  \n            </aside>\n        </div>\n      );\n    }\n  \n  }\n  export default ComputationWindow;","import React, {useCallback} from 'react';\nimport {useDropzone} from 'react-dropzone';\nimport styled from 'styled-components';\n\nconst getColor = (props) => {\n  if (props.isDragAccept) {\n      return '#00e676';\n  }\n  if (props.isDragReject) {\n      return '#ff1744';\n  }\n  if (props.isDragActive) {\n      return '#2196f3';\n  }\n  return '#eeeeee';\n}\n\n\n\nconst Container = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  border-width: 2px;\n  border-radius: 2px;\n  border-color: ${props => getColor(props)};\n  border-style: dashed;\n  background-color: #fafafa;\n  color: #bdbdbd;\n  outline: none;\n  transition: border .24s ease-in-out;\n`;\n\nfunction StyledDropzone(props) {\n  const onDrop = useCallback(props.onDrop, []);\n\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive,\n    isDragAccept,\n    isDragReject\n  } = useDropzone({onDrop : onDrop,\n                accept: '.vtk, .ucd'\n              });\n  \n  return (\n    <div className=\"container\">\n      <Container {...getRootProps({isDragActive, isDragAccept, isDragReject})}>\n        <input {...getInputProps()} />\n        <p>Drag 'n' drop some UCD files here, or click to select files</p>\n      </Container>\n    </div>\n  );\n}\n\nexport default StyledDropzone ;","export class Dictionary{\n    constructor() {\n      this.data = {};\n    }\n    get(k, callbackIfKeyNotFound = null) {\n      if (this.data[k] === undefined && callbackIfKeyNotFound === null)  {\n        this.set(k, callbackIfKeyNotFound())\n        return this.data[k]\n      }\n      else if (this.data[k] === undefined) { \n        throw  Object.assign(\n          new Error('{k} not in dictionary'),\n          { code: 400 }\n       );\n      }\n      else {\n        return this.data[k]\n      }\n    }\n  \n    set(k, v){\n      this.data[k]= v;\n    }\n    keys() {\n      return Object.keys(this.data)\n    }\n    length() {\n      return this.keys().length\n    }\n  }\n  \n  export class MeshesList extends Dictionary {\n    //Class representing all meshes of all patients (saved as BLOBS of a single patient. Relies on the correct index, and the correct format)\n  \n  \n    addNewFile(file) {\n  \n      //TODO: check name is correct.\n      //END TODO\n  \n      let nameSplit = file.name.split('_');\n      let pId = nameSplit.slice(0, -1).join('_');\n      let time = parseInt(nameSplit[nameSplit.length - 1].split('.')[0]);\n      if (! (pId in this.data) ) {\n        this.set(pId, new Dictionary());\n      }\n  \n  \n      let patient = this.get(pId);\n      patient.set(time, file);\n    }\n  \n    removeFile(pId) {\n      console.log('Removing', pId)\n      console.log(this)\n      delete this.data[pId]\n    }\n  \n    isOK() {\n      //Returns OK if the files is complete: ie, if there are all the frames from 0 to max\n      return  this.keys().every(k => this.get(k).keys() === Math.max(...this.get(k).keys()) );\n      }\n  }\n  ","/* eslint-disable */\nvar $MODULE_NAME = (function() {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  if (typeof __filename !== 'undefined') _scriptDir = _scriptDir || __filename;\n  return (\nfunction($MODULE_NAME) {\n  $MODULE_NAME = $MODULE_NAME || {};\n\nvar Module=typeof $MODULE_NAME!==\"undefined\"?$MODULE_NAME:{};var readyPromiseResolve,readyPromiseReject;Module[\"ready\"]=new Promise(function(resolve,reject){readyPromiseResolve=resolve;readyPromiseReject=reject});var moduleOverrides={};var key;for(key in Module){if(Module.hasOwnProperty(key)){moduleOverrides[key]=Module[key]}}var arguments_=[];var thisProgram=\"./this.program\";var quit_=function(status,toThrow){throw toThrow};var ENVIRONMENT_IS_WEB=false;var ENVIRONMENT_IS_WORKER=false;var ENVIRONMENT_IS_NODE=false;var ENVIRONMENT_IS_SHELL=false;ENVIRONMENT_IS_WEB=typeof window===\"object\";ENVIRONMENT_IS_WORKER=typeof importScripts===\"function\";ENVIRONMENT_IS_NODE=typeof process===\"object\"&&typeof process.versions===\"object\"&&typeof process.versions.node===\"string\";ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;var scriptDirectory=\"\";function locateFile(path){if(Module[\"locateFile\"]){return Module[\"locateFile\"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;var nodeFS;var nodePath;if(ENVIRONMENT_IS_NODE){if(ENVIRONMENT_IS_WORKER){scriptDirectory=require(\"path\").dirname(scriptDirectory)+\"/\"}else{scriptDirectory=__dirname+\"/\"}read_=function shell_read(filename,binary){if(!nodeFS)nodeFS=require(\"fs\");if(!nodePath)nodePath=require(\"path\");filename=nodePath[\"normalize\"](filename);return nodeFS[\"readFileSync\"](filename,binary?null:\"utf8\")};readBinary=function readBinary(filename){var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}assert(ret.buffer);return ret};if(process[\"argv\"].length>1){thisProgram=process[\"argv\"][1].replace(/\\\\/g,\"/\")}arguments_=process[\"argv\"].slice(2);process[\"on\"](\"uncaughtException\",function(ex){if(!(ex instanceof ExitStatus)){throw ex}});process[\"on\"](\"unhandledRejection\",abort);quit_=function(status){process[\"exit\"](status)};Module[\"inspect\"]=function(){return\"[Emscripten Module object]\"}}else if(ENVIRONMENT_IS_SHELL){if(typeof read!=\"undefined\"){read_=function shell_read(f){return read(f)}}readBinary=function readBinary(f){var data;if(typeof readbuffer===\"function\"){return new Uint8Array(readbuffer(f))}data=read(f,\"binary\");assert(typeof data===\"object\");return data};if(typeof scriptArgs!=\"undefined\"){arguments_=scriptArgs}else if(typeof arguments!=\"undefined\"){arguments_=arguments}if(typeof quit===\"function\"){quit_=function(status){quit(status)}}if(typeof print!==\"undefined\"){if(typeof console===\"undefined\")console={};console.log=print;console.warn=console.error=typeof printErr!==\"undefined\"?printErr:print}}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(typeof document!==\"undefined\"&&document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf(\"blob:\")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.lastIndexOf(\"/\")+1)}else{scriptDirectory=\"\"}{read_=function(url){var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=function(url){var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.responseType=\"arraybuffer\";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=function(url,onload,onerror){var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,true);xhr.responseType=\"arraybuffer\";xhr.onload=function(){if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=function(title){document.title=title}}else{}var out=Module[\"print\"]||console.log.bind(console);var err=Module[\"printErr\"]||console.warn.bind(console);for(key in moduleOverrides){if(moduleOverrides.hasOwnProperty(key)){Module[key]=moduleOverrides[key]}}moduleOverrides=null;if(Module[\"arguments\"])arguments_=Module[\"arguments\"];if(Module[\"thisProgram\"])thisProgram=Module[\"thisProgram\"];if(Module[\"quit\"])quit_=Module[\"quit\"];var wasmBinary;if(Module[\"wasmBinary\"])wasmBinary=Module[\"wasmBinary\"];var noExitRuntime;if(Module[\"noExitRuntime\"])noExitRuntime=Module[\"noExitRuntime\"];if(typeof WebAssembly!==\"object\"){abort(\"no native wasm support detected\")}var wasmMemory;var ABORT=false;var EXITSTATUS;function assert(condition,text){if(!condition){abort(\"Assertion failed: \"+text)}}function getCFunc(ident){var func=Module[\"_\"+ident];assert(func,\"Cannot call unknown function \"+ident+\", make sure it is exported\");return func}function ccall(ident,returnType,argTypes,args,opts){var toC={\"string\":function(str){var ret=0;if(str!==null&&str!==undefined&&str!==0){var len=(str.length<<2)+1;ret=stackAlloc(len);stringToUTF8(str,ret,len)}return ret},\"array\":function(arr){var ret=stackAlloc(arr.length);writeArrayToMemory(arr,ret);return ret}};function convertReturnValue(ret){if(returnType===\"string\")return UTF8ToString(ret);if(returnType===\"boolean\")return Boolean(ret);return ret}var func=getCFunc(ident);var cArgs=[];var stack=0;if(args){for(var i=0;i<args.length;i++){var converter=toC[argTypes[i]];if(converter){if(stack===0)stack=stackSave();cArgs[i]=converter(args[i])}else{cArgs[i]=args[i]}}}var ret=func.apply(null,cArgs);ret=convertReturnValue(ret);if(stack!==0)stackRestore(stack);return ret}function cwrap(ident,returnType,argTypes,opts){argTypes=argTypes||[];var numericArgs=argTypes.every(function(type){return type===\"number\"});var numericRet=returnType!==\"string\";if(numericRet&&numericArgs&&!opts){return getCFunc(ident)}return function(){return ccall(ident,returnType,argTypes,arguments,opts)}}var UTF8Decoder=typeof TextDecoder!==\"undefined\"?new TextDecoder(\"utf8\"):undefined;function UTF8ArrayToString(heap,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heap[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heap.subarray&&UTF8Decoder){return UTF8Decoder.decode(heap.subarray(idx,endPtr))}else{var str=\"\";while(idx<endPtr){var u0=heap[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heap[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heap[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heap[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}}return str}function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):\"\"}function stringToUTF8Array(str,heap,outIdx,maxBytesToWrite){if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}}heap[outIdx]=0;return outIdx-startIdx}function stringToUTF8(str,outPtr,maxBytesToWrite){return stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite)}function writeArrayToMemory(array,buffer){HEAP8.set(array,buffer)}var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBufferAndViews(buf){buffer=buf;Module[\"HEAP8\"]=HEAP8=new Int8Array(buf);Module[\"HEAP16\"]=HEAP16=new Int16Array(buf);Module[\"HEAP32\"]=HEAP32=new Int32Array(buf);Module[\"HEAPU8\"]=HEAPU8=new Uint8Array(buf);Module[\"HEAPU16\"]=HEAPU16=new Uint16Array(buf);Module[\"HEAPU32\"]=HEAPU32=new Uint32Array(buf);Module[\"HEAPF32\"]=HEAPF32=new Float32Array(buf);Module[\"HEAPF64\"]=HEAPF64=new Float64Array(buf)}var INITIAL_MEMORY=Module[\"INITIAL_MEMORY\"]||104857600;var wasmTable;var __ATPRERUN__=[];var __ATINIT__=[];var __ATMAIN__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;__ATINIT__.push({func:function(){___wasm_call_ctors()}});function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}Module[\"preloadedImages\"]={};Module[\"preloadedAudios\"]={};function abort(what){if(Module[\"onAbort\"]){Module[\"onAbort\"](what)}what+=\"\";err(what);ABORT=true;EXITSTATUS=1;what=\"abort(\"+what+\"). Build with -s ASSERTIONS=1 for more info.\";var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e}function hasPrefix(str,prefix){return String.prototype.startsWith?str.startsWith(prefix):str.indexOf(prefix)===0}var dataURIPrefix=\"data:application/octet-stream;base64,\";function isDataURI(filename){return hasPrefix(filename,dataURIPrefix)}var fileURIPrefix=\"file://\";function isFileURI(filename){return hasPrefix(filename,fileURIPrefix)}var wasmBinaryFile=\"interpolateSampling.wasm\";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}function getBinary(file){try{if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}else{throw\"both async and sync fetching of the wasm failed\"}}catch(err){abort(err)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch===\"function\"&&!isFileURI(wasmBinaryFile)){return fetch(wasmBinaryFile,{credentials:\"same-origin\"}).then(function(response){if(!response[\"ok\"]){throw\"failed to load wasm binary file at '\"+wasmBinaryFile+\"'\"}return response[\"arrayBuffer\"]()}).catch(function(){return getBinary(wasmBinaryFile)})}else{if(readAsync){return new Promise(function(resolve,reject){readAsync(wasmBinaryFile,function(response){resolve(new Uint8Array(response))},reject)})}}}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}function createWasm(){var info={\"a\":asmLibraryArg};function receiveInstance(instance,module){var exports=instance.exports;Module[\"asm\"]=exports;wasmMemory=Module[\"asm\"][\"g\"];updateGlobalBufferAndViews(wasmMemory.buffer);wasmTable=Module[\"asm\"][\"m\"];removeRunDependency(\"wasm-instantiate\")}addRunDependency(\"wasm-instantiate\");function receiveInstantiatedSource(output){receiveInstance(output[\"instance\"])}function instantiateArrayBuffer(receiver){return getBinaryPromise().then(function(binary){return WebAssembly.instantiate(binary,info)}).then(receiver,function(reason){err(\"failed to asynchronously prepare wasm: \"+reason);abort(reason)})}function instantiateAsync(){if(!wasmBinary&&typeof WebAssembly.instantiateStreaming===\"function\"&&!isDataURI(wasmBinaryFile)&&!isFileURI(wasmBinaryFile)&&typeof fetch===\"function\"){return fetch(wasmBinaryFile,{credentials:\"same-origin\"}).then(function(response){var result=WebAssembly.instantiateStreaming(response,info);return result.then(receiveInstantiatedSource,function(reason){err(\"wasm streaming compile failed: \"+reason);err(\"falling back to ArrayBuffer instantiation\");return instantiateArrayBuffer(receiveInstantiatedSource)})})}else{return instantiateArrayBuffer(receiveInstantiatedSource)}}if(Module[\"instantiateWasm\"]){try{var exports=Module[\"instantiateWasm\"](info,receiveInstance);return exports}catch(e){err(\"Module.instantiateWasm callback failed with error: \"+e);return false}}instantiateAsync().catch(readyPromiseReject);return{}}function callRuntimeCallbacks(callbacks){while(callbacks.length>0){var callback=callbacks.shift();if(typeof callback==\"function\"){callback(Module);continue}var func=callback.func;if(typeof func===\"number\"){if(callback.arg===undefined){wasmTable.get(func)()}else{wasmTable.get(func)(callback.arg)}}else{func(callback.arg===undefined?null:callback.arg)}}}function ___assert_fail(condition,filename,line,func){abort(\"Assertion failed: \"+UTF8ToString(condition)+\", at: \"+[filename?UTF8ToString(filename):\"unknown filename\",line,func?UTF8ToString(func):\"unknown function\"])}var ExceptionInfoAttrs={DESTRUCTOR_OFFSET:0,REFCOUNT_OFFSET:4,TYPE_OFFSET:8,CAUGHT_OFFSET:12,RETHROWN_OFFSET:13,SIZE:16};function ___cxa_allocate_exception(size){return _malloc(size+ExceptionInfoAttrs.SIZE)+ExceptionInfoAttrs.SIZE}function ExceptionInfo(excPtr){this.excPtr=excPtr;this.ptr=excPtr-ExceptionInfoAttrs.SIZE;this.set_type=function(type){HEAP32[this.ptr+ExceptionInfoAttrs.TYPE_OFFSET>>2]=type};this.get_type=function(){return HEAP32[this.ptr+ExceptionInfoAttrs.TYPE_OFFSET>>2]};this.set_destructor=function(destructor){HEAP32[this.ptr+ExceptionInfoAttrs.DESTRUCTOR_OFFSET>>2]=destructor};this.get_destructor=function(){return HEAP32[this.ptr+ExceptionInfoAttrs.DESTRUCTOR_OFFSET>>2]};this.set_refcount=function(refcount){HEAP32[this.ptr+ExceptionInfoAttrs.REFCOUNT_OFFSET>>2]=refcount};this.set_caught=function(caught){caught=caught?1:0;HEAP8[this.ptr+ExceptionInfoAttrs.CAUGHT_OFFSET>>0]=caught};this.get_caught=function(){return HEAP8[this.ptr+ExceptionInfoAttrs.CAUGHT_OFFSET>>0]!=0};this.set_rethrown=function(rethrown){rethrown=rethrown?1:0;HEAP8[this.ptr+ExceptionInfoAttrs.RETHROWN_OFFSET>>0]=rethrown};this.get_rethrown=function(){return HEAP8[this.ptr+ExceptionInfoAttrs.RETHROWN_OFFSET>>0]!=0};this.init=function(type,destructor){this.set_type(type);this.set_destructor(destructor);this.set_refcount(0);this.set_caught(false);this.set_rethrown(false)};this.add_ref=function(){var value=HEAP32[this.ptr+ExceptionInfoAttrs.REFCOUNT_OFFSET>>2];HEAP32[this.ptr+ExceptionInfoAttrs.REFCOUNT_OFFSET>>2]=value+1};this.release_ref=function(){var prev=HEAP32[this.ptr+ExceptionInfoAttrs.REFCOUNT_OFFSET>>2];HEAP32[this.ptr+ExceptionInfoAttrs.REFCOUNT_OFFSET>>2]=prev-1;return prev===1}}var exceptionLast=0;var uncaughtExceptionCount=0;function ___cxa_throw(ptr,type,destructor){var info=new ExceptionInfo(ptr);info.init(type,destructor);exceptionLast=ptr;uncaughtExceptionCount++;throw ptr}function _abort(){abort()}var _emscripten_get_now;if(ENVIRONMENT_IS_NODE){_emscripten_get_now=function(){var t=process[\"hrtime\"]();return t[0]*1e3+t[1]/1e6}}else if(typeof dateNow!==\"undefined\"){_emscripten_get_now=dateNow}else _emscripten_get_now=function(){return performance.now()};var _emscripten_get_now_is_monotonic=true;function setErrNo(value){HEAP32[___errno_location()>>2]=value;return value}function _clock_gettime(clk_id,tp){var now;if(clk_id===0){now=Date.now()}else if((clk_id===1||clk_id===4)&&_emscripten_get_now_is_monotonic){now=_emscripten_get_now()}else{setErrNo(28);return-1}HEAP32[tp>>2]=now/1e3|0;HEAP32[tp+4>>2]=now%1e3*1e3*1e3|0;return 0}function abortOnCannotGrowMemory(requestedSize){abort(\"OOM\")}function _emscripten_resize_heap(requestedSize){requestedSize=requestedSize>>>0;abortOnCannotGrowMemory(requestedSize)}var asmLibraryArg={\"a\":___assert_fail,\"c\":___cxa_allocate_exception,\"b\":___cxa_throw,\"d\":_abort,\"f\":_clock_gettime,\"e\":_emscripten_resize_heap};var asm=createWasm();var ___wasm_call_ctors=Module[\"___wasm_call_ctors\"]=function(){return(___wasm_call_ctors=Module[\"___wasm_call_ctors\"]=Module[\"asm\"][\"h\"]).apply(null,arguments)};var _adder=Module[\"_adder\"]=function(){return(_adder=Module[\"_adder\"]=Module[\"asm\"][\"i\"]).apply(null,arguments)};var _sumArray=Module[\"_sumArray\"]=function(){return(_sumArray=Module[\"_sumArray\"]=Module[\"asm\"][\"j\"]).apply(null,arguments)};var _malloc=Module[\"_malloc\"]=function(){return(_malloc=Module[\"_malloc\"]=Module[\"asm\"][\"k\"]).apply(null,arguments)};var _free=Module[\"_free\"]=function(){return(_free=Module[\"_free\"]=Module[\"asm\"][\"l\"]).apply(null,arguments)};var _doParcellationSamplint=Module[\"_doParcellationSamplint\"]=function(){return(_doParcellationSamplint=Module[\"_doParcellationSamplint\"]=Module[\"asm\"][\"n\"]).apply(null,arguments)};var ___errno_location=Module[\"___errno_location\"]=function(){return(___errno_location=Module[\"___errno_location\"]=Module[\"asm\"][\"o\"]).apply(null,arguments)};var stackSave=Module[\"stackSave\"]=function(){return(stackSave=Module[\"stackSave\"]=Module[\"asm\"][\"p\"]).apply(null,arguments)};var stackRestore=Module[\"stackRestore\"]=function(){return(stackRestore=Module[\"stackRestore\"]=Module[\"asm\"][\"q\"]).apply(null,arguments)};var stackAlloc=Module[\"stackAlloc\"]=function(){return(stackAlloc=Module[\"stackAlloc\"]=Module[\"asm\"][\"r\"]).apply(null,arguments)};Module[\"ccall\"]=ccall;Module[\"cwrap\"]=cwrap;var calledRun;function ExitStatus(status){this.name=\"ExitStatus\";this.message=\"Program terminated with exit(\"+status+\")\";this.status=status}dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(args){args=args||arguments_;if(runDependencies>0){return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module[\"calledRun\"]=true;if(ABORT)return;initRuntime();preMain();readyPromiseResolve(Module);if(Module[\"onRuntimeInitialized\"])Module[\"onRuntimeInitialized\"]();postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout(function(){setTimeout(function(){Module[\"setStatus\"](\"\")},1);doRun()},1)}else{doRun()}}Module[\"run\"]=run;if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].pop()()}}noExitRuntime=true;run();\n\n\n  return $MODULE_NAME.ready\n}\n);\n})();\nif (typeof exports === 'object' && typeof module === 'object')\n  module.exports = $MODULE_NAME;\nelse if (typeof define === 'function' && define['amd'])\n  define([], function() { return $MODULE_NAME; });\nelse if (typeof exports === 'object')\n  exports[\"$MODULE_NAME\"] = $MODULE_NAME;\n","module.exports = __webpack_public_path__ + \"366c8b4c075ca22985f31fe8188ee7f0.wasm\";"],"sourceRoot":""}